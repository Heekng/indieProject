<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="Manager">
	<select id="getNoneExchangeData" resultType="popcornExchangeDataVO">
		SELECT ROWNUM ROWNUMBER, aa.* FROM 
		(SELECT pet.MEMBERID, pet.MONEY, pet.POPCORNNUM, pet.EXCHANGEDATE, pet.EXCHANGECHECK, pet.EXCHANGENUM, mat.MEMBERNAME, mat.MEMBERBANK, mat.ACCOUNTNUM 
		FROM POPCORN_EXCHANGE_TABLE pet , MEMBER_ACCOUNT_TABLE mat 
		WHERE pet.MEMBERID = mat.MEMBERID AND pet.EXCHANGECHECK = 'no' ORDER BY EXCHANGENUM ASC) aa
	</select>
	<select id="getExchangeData" parameterType="hashmap" resultType="popcornExchangeDataVO">
		SELECT * FROM 
		(SELECT ROWNUM ROWNUMBER, aa.* FROM 
		(SELECT pet.MEMBERID, pet.MONEY, pet.POPCORNNUM, pet.EXCHANGEDATE, pet.EXCHANGECHECK, pet.EXCHANGENUM, mat.MEMBERNAME, mat.MEMBERBANK, mat.ACCOUNTNUM FROM POPCORN_EXCHANGE_TABLE pet , MEMBER_ACCOUNT_TABLE mat WHERE pet.MEMBERID = mat.MEMBERID AND pet.EXCHANGECHECK = 'no' ORDER BY EXCHANGENUM ASC) aa) 
		WHERE ROWNUMBER BETWEEN #{startRow} AND #{endRow};
	</select>
	<update id="setExchangeYes" parameterType="string">
		UPDATE POPCORN_EXCHANGE_TABLE SET EXCHANGECHECK = 'yes' WHERE EXCHANGENUM = #{exchangeNum}
	</update>
</mapper>