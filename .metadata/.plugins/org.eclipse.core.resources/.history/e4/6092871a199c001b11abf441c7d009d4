/**
 * 
 */
var nowPage = 1;

$(window).scroll(function(){   //스크롤이 최하단 으로 내려가면 리스트를 조회하고 page를 증가시킨다.
	if($(window).scrollTop() >= $(document).height() - $(window).height()){
		var text = "<c:forEach var='movie' items='${movieList}'>"+
					"<div class='col-poster' style='width: 30%; height: 10%; margin: 10px;' onclick=''>"+
					"<div class='image fit posterTag' style='margin-bottom: 0px;'>"+
					"<c:forEach var='poster' items='${moviePosterList}'>"+
					"<c:if test='${poster.getAmaNum() eq movie.getAmaNum()}'>"+
					"<c:choose><c:when test='${!empty poster.getFileName()}'><c:set var='textSize' value='${fn:length(poster.getFileName())}'/><img src='${pageContext.request.contextPath}/images/amaMovie/${fn:substring(poster.getFileName(),5,textSize)}' alt='${poster.getFileName()}'/></c:when><c:otherwise><img src='${pageContext.request.contextPath}/images/amaMovie/poster/testPoster1.jpg' alt=''/></c:otherwise></c:choose>"+
					"</c:if>"+
					"</c:forEach>"+
					"<p>${movie.getAmaTitleKor()}</p>"+
					"</div>"+
					"</div>"+
					"</c:forEach>";
		$("#posterRow").append(text);
	}
});

function loadPage(){
	var startRow = (nowPage * boardSize) + 1;
	var endRow;
	if(totalPageCnt <= nowPage){
		return false;
	}
	if(totalPageCnt == (nowPage+1)){
		endRow = totalCnt;
	}else{
		endRow = startRow + boardSize - 1;
	}
	
	$.ajax({
		url : contextPath + "/member/MemberLoadMyMovieListOk.me",
		type : "post",
		data : {"session_id" : session_id, "startRow" : startRow, "endRow" : endRow},
		dataType : "json",
		success : function(result){
						
			
			
			$("input[name='memberId']").val(memberData.memberId);
			$("input[name='memberEmail']").val(memberData.memberEmail);
			nowEmail = memberData.memberEmail;
			$("#step1").hide();
			$("#step2").show();
		},
		error:function(){//통신 오류 시
			console.log("오류");
		}
	})
	
}